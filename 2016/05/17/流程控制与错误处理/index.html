<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  <link href="//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">



<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=0.5.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="javascript,流程控制和错误处理," />





  <link rel="alternate" href="/atom.xml" title="GaoQ's blog" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=0.5.0" />






<meta name="description" content="Energy and persistence conquer all things.  在JavaScript中，任何表达式(expression)都可以看作一条语句(statement)，每条语句可以使用分号( ; )来分隔。你可以在每行书写一条语句；也可以在一行书写多条语句。但是我们推荐在书写代码的时候采用第一种方式，以便于后期的代码维护。 语句块(Block Statement)大多数程序">
<meta name="keywords" content="javascript,流程控制和错误处理">
<meta property="og:type" content="article">
<meta property="og:title" content="流程控制与错误处理">
<meta property="og:url" content="http://gaoquan.wang/2016/05/17/流程控制与错误处理/index.html">
<meta property="og:site_name" content="GaoQ&#39;s blog">
<meta property="og:description" content="Energy and persistence conquer all things.  在JavaScript中，任何表达式(expression)都可以看作一条语句(statement)，每条语句可以使用分号( ; )来分隔。你可以在每行书写一条语句；也可以在一行书写多条语句。但是我们推荐在书写代码的时候采用第一种方式，以便于后期的代码维护。 语句块(Block Statement)大多数程序">
<meta property="og:updated_time" content="2017-06-04T12:54:20.326Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="流程控制与错误处理">
<meta name="twitter:description" content="Energy and persistence conquer all things.  在JavaScript中，任何表达式(expression)都可以看作一条语句(statement)，每条语句可以使用分号( ; )来分隔。你可以在每行书写一条语句；也可以在一行书写多条语句。但是我们推荐在书写代码的时候采用第一种方式，以便于后期的代码维护。 语句块(Block Statement)大多数程序">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>

  <title>
  

  
    流程控制与错误处理 | GaoQ's blog
  
</title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  



  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?b902fa08b28044c55da6c70921955ecb";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>








  
  
    
  

  <div class="container one-collumn sidebar-position-left  ">
    <div class="headband"></div>


<a href="https://github.com/GaoQ1"><img style="position: absolute; top: 0; left: 0; border: 0;" src="https://camo.githubusercontent.com/8b6b8ccc6da3aa5722903da7b58eb5ab1081adee/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f6c6566745f6f72616e67655f6666373630302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_left_orange_ff7600.png"></a>


    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">GaoQ's blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">There are no shortcuts to any place worth going</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
            关于我
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    
    
      <blockquote>
<p>Energy and persistence conquer all things.</p>
</blockquote>
<p>在JavaScript中，任何表达式(expression)都可以看作一条语句(statement)，每条语句可以使用分号( ; )来分隔。你可以在每行书写一条语句；也可以在一行书写多条语句。但是我们推荐在书写代码的时候采用第一种方式，以便于后期的代码维护。</p>
<h2 id="语句块-Block-Statement"><a href="#语句块-Block-Statement" class="headerlink" title="语句块(Block Statement)"></a>语句块(Block Statement)</h2><p>大多数程序都使用语句块来给语句分组，这样可以使语句的结构清晰明了。我们使用一对花括号（ {} ）来分组语句块，如下所示：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">   statement_1;   statement_2;</div><div class="line">   statement_3;</div><div class="line">   ...</div><div class="line">   statement_n;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>示例<br>语句块通常大多数用于流程控制，如 if, for, while等等。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">while</span> (x &lt; <span class="number">10</span>)&#123;</div><div class="line">  x++;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这里{ x++; } 就是语句块。</p>
<h2 id="条件判断语句-Conditional-Statements"><a href="#条件判断语句-Conditional-Statements" class="headerlink" title="条件判断语句(Conditional Statements)"></a>条件判断语句(Conditional Statements)</h2><p>条件判断语句指的是根据指定的条件所返回的结果（真或假或其它预定义的），来执行特定的语句。JavaScript提供了两种条件判断语句：if…else 和 switch。</p>
<h3 id="if…else语句"><a href="#if…else语句" class="headerlink" title="if…else语句"></a>if…else语句</h3><p>当一个逻辑条件为真，用if语句执行一个语句。当这个条件为假，使用可选择的else从句来执行这个语句。</p>
<p>在条件表达式中最好不要使用“=”来判断条件是否相等，因为这会产生非预期结果。不要使用下面的代码：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (x = y) &#123;</div><div class="line">  <span class="comment">/* do the right thing */</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>如果你需要在条件表达式中使用赋值，一个共同的习惯是在赋值语句前后额外的添加一对括号。例如：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> ((x = y)) &#123;</div><div class="line">  <span class="comment">/* do the right thing */</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>下面这些值将被计算出 false:</p>
<ul>
<li>false</li>
<li>undefined</li>
<li>null</li>
<li>0</li>
<li>NaN</li>
<li>空字符串(“”)<br>当传递给条件语句时，所有其他值，包括所有对象会被计算为 true。</li>
</ul>
<p><strong>请不要混淆原始的布尔值true和false与布尔对象的值true和false。</strong>例如：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> b = <span class="keyword">new</span> <span class="built_in">Boolean</span>(<span class="literal">false</span>);</div><div class="line"><span class="keyword">if</span>(b) <span class="comment">//this condition evaluates to true</span></div><div class="line"><span class="keyword">if</span>(b == <span class="literal">true</span>) <span class="comment">//this condition evaluates to false</span></div></pre></td></tr></table></figure></p>
<p>例如<br>在下面的例子中，如果一个文本对象中的字符串长度是3，函数checkData返回true；否则，函数显示一个alert的弹出框消息并返回false。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkData</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (<span class="built_in">document</span>.form1.threeChar.value.length == <span class="number">3</span>) &#123;</div><div class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    alert(<span class="string">"Enter exactly three characters. "</span> +</div><div class="line">      <span class="built_in">document</span>.form1.threeChar.value + <span class="string">" is not valid."</span>);</div><div class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="switch语句-Switch-Statement"><a href="#switch语句-Switch-Statement" class="headerlink" title="switch语句(Switch Statement)"></a>switch语句(Switch Statement)</h3><p>开关语句允许一个程序求一个表达式的值并且尝试去匹配表达式的值到一个case label。如果匹配成功，这个程序执行相关的语句。开关语句如下所示：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">switch</span> (expression) &#123;</div><div class="line">   <span class="keyword">case</span> label_1:</div><div class="line">      statements_1</div><div class="line">      [<span class="keyword">break</span>;]</div><div class="line">   <span class="keyword">case</span> label_2:</div><div class="line">      statements_2</div><div class="line">      [<span class="keyword">break</span>;]</div><div class="line">   ...</div><div class="line">   default:</div><div class="line">      statements_def</div><div class="line">      [<span class="keyword">break</span>;]</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="循环语句-Loop-Statement"><a href="#循环语句-Loop-Statement" class="headerlink" title="循环语句(Loop Statement)"></a>循环语句(Loop Statement)</h2><p>循环语句是一系列反复执行直到符合特定条件的命令。JavaScript 支持 for, do while, while这些循环语句，还有Label (label 本身不是一个循环语句，但是经常和这些语句一起使用)。另外，你可以在循环语句中使用break和continue 语句。另一个语句：for…in也反复执行语句，但它是用来操作对象的。</p>
<h3 id="标签语句-label-Statement"><a href="#标签语句-label-Statement" class="headerlink" title="标签语句(label Statement)"></a>标签语句(label Statement)</h3><p>标签语句提供一种使你同一程序的另一处找到它的标识。例如，你可以用一个标签来识别一个循环，并用break或continue语句来说明一个程序是否要中断这个循环或是继续执行。如下所示：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">label:</div><div class="line">    statement</div></pre></td></tr></table></figure></p>
<p>label的值可以是js的任何非保留字符标识符。用label标识的语句可以是任何语句。</p>
<p>例如：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">markLoop:</div><div class="line"><span class="keyword">while</span>(theMark == <span class="literal">true</span>)&#123;</div><div class="line">    doSomething();</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="中断语句-break-Statement"><a href="#中断语句-break-Statement" class="headerlink" title="中断语句(break Statement)"></a>中断语句(break Statement)</h2><p>使用中断语句终止循环、开关或与标签语句连接。</p>
<ul>
<li>当你使用没有带标签语句的中断语句（break）时，while,do-while,for或switch封闭的内部语句将立即终止，并转移到后面的语句执行。</li>
<li><p>当你使用带有标签语句的中断语句(break)时，将终止在特定的标签语句。</p>
<p>中断语句的语法如下：<br>1.break;<br>2.break label;</p>
<p>第一种语法形式用于终止在循环体或者switch的封闭内部；第二种语法形式用于在特定的封闭标签语句。</p>
<p>示例1：<br>下面的例子中，对一个数组里的元素进行循环处理，直到数组元素下标等于theValue的值：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;a.length;i++)&#123;</div><div class="line">    <span class="keyword">if</span>(a[i] == theValue)&#123;</div><div class="line">        <span class="keyword">break</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>示例2：中断跳到标签语句<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> x = <span class="number">0</span>;</div><div class="line"><span class="keyword">var</span> z = <span class="number">0</span>;</div><div class="line">labelCancelLoops: <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">"Outer loops:"</span> + x);</div><div class="line">    x += <span class="number">1</span>;</div><div class="line">    z = <span class="number">1</span>;</div><div class="line">    <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"Inner loops: "</span>+z);</div><div class="line">        z+=<span class="number">1</span>;</div><div class="line">        <span class="keyword">if</span>(z === <span class="number">10</span> &amp;&amp; x === <span class="number">10</span>)&#123;</div><div class="line">            <span class="keyword">break</span> labelCancelLoops;</div><div class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(z === <span class="number">10</span>)&#123;</div><div class="line">            <span class="keyword">break</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="连续语句-continue-Statement"><a href="#连续语句-continue-Statement" class="headerlink" title="连续语句(continue Statement)"></a>连续语句(continue Statement)</h2><p>连续语句用于重新开始while,do-while,for语句，或者标签语句(label statement).</p>
<ul>
<li>当你使用没有带标签语句的连续语句(continue Statement)时，将在当前的while,do-while或者for循环体封闭的内部语句中止执行，然后进入下一次循环继续执行。与中断语句(break Statement)相比，连续语句不会把整个循环终止。在while循环里，将跳回条件判断(continue)；<br>在for循环里，则调回累计表达式(increment-expression).</li>
<li><p>当你使用带有标签语句的连续语句时，用于识别循环体中的标签语句。</p>
<p>连续语句的语法如下：</p>
<p>1.continue<br>2.continue label</p>
</li>
</ul>
<p>示例1<br>下面的例子实现了一个带有连续语句的while循环，当i的值为3时，该连续语句执行。因此，n的值分别为1、3、7和12。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">i = <span class="number">0</span>;</div><div class="line">n = <span class="number">0</span>;</div><div class="line"><span class="keyword">while</span> (i &lt; <span class="number">5</span>) &#123;</div><div class="line">   i++;</div><div class="line">   <span class="keyword">if</span> (i == <span class="number">3</span>)</div><div class="line">      <span class="keyword">continue</span>;</div><div class="line">   n += i;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>示例2<br>一个标签语句checkiandj包含了一个标签语句checkj。如果连续语句被触发，程序会中止在当前循环中的checkj然后开始下一轮循环。每次连续语句被触发，checkj会重复直到该条件判断返回false值。当返回false值时，会完成剩下的checkiandj语句，然后checkiandj会重复直到其条件判断返回false值。当返回false值时，程序会继续执行在checkiandj后面的语句。</p>
<p>如果连续语句包含的是checkiandj标签，那么程序会在checkiandj语句的顶层继续执行。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">checkiandj :</div><div class="line">   <span class="keyword">while</span> (i &lt; <span class="number">4</span>) &#123;</div><div class="line">      <span class="built_in">document</span>.write(i + <span class="string">"&lt;br/&gt;"</span>);</div><div class="line">      i += <span class="number">1</span>;</div><div class="line">      checkj :</div><div class="line">         <span class="keyword">while</span> (j &gt; <span class="number">4</span>) &#123;</div><div class="line">            <span class="built_in">document</span>.write(j + <span class="string">"&lt;br/&gt;"</span>);</div><div class="line">            j -= <span class="number">1</span>;</div><div class="line">            <span class="keyword">if</span> ((j % <span class="number">2</span>) == <span class="number">0</span>)</div><div class="line">               <span class="keyword">continue</span> checkj;</div><div class="line">            <span class="built_in">document</span>.write(j + <span class="string">" is odd.&lt;br/&gt;"</span>);</div><div class="line">         &#125;</div><div class="line">      <span class="built_in">document</span>.write(<span class="string">"i = "</span> + i + <span class="string">"&lt;br/&gt;"</span>);</div><div class="line">      <span class="built_in">document</span>.write(<span class="string">"j = "</span> + j + <span class="string">"&lt;br/&gt;"</span>);</div><div class="line">   &#125;</div></pre></td></tr></table></figure></p>
<h2 id="对象操作语句-Object-Manipulation-Statements"><a href="#对象操作语句-Object-Manipulation-Statements" class="headerlink" title="对象操作语句(Object Manipulation Statements)"></a>对象操作语句(Object Manipulation Statements)</h2><p>JavaScript用for…in,for each…in和with语句来操作对象。</p>
<h2 id="异常处理语句-Exception-Handling-Statements"><a href="#异常处理语句-Exception-Handling-Statements" class="headerlink" title="异常处理语句(Exception Handling Statements)"></a>异常处理语句(Exception Handling Statements)</h2><p>你可以用throw语句抛出一个异常并且用try…catch语句捕获处理它。</p>
<h3 id="异常类型-Exception-Types"><a href="#异常类型-Exception-Types" class="headerlink" title="异常类型(Exception Types)"></a>异常类型(Exception Types)</h3><p>JavaScript可以抛出任意对象。然而，不是所有对象能产生相同的结果。尽管抛出数值或者字母串作为错误信息十分常见，但是通常用下列其中一种异常类型来创建目标更为高效：</p>
<ul>
<li>ECMAScript exceptions</li>
<li>DOMException</li>
<li>nsIXPCException</li>
</ul>
<h3 id="抛出错误-throw-Statement"><a href="#抛出错误-throw-Statement" class="headerlink" title="抛出错误(throw Statement)"></a>抛出错误(throw Statement)</h3><p>使用throw语句抛出一个异常。当你抛出异常，你规定一个含有值的表达式要被抛出。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">throw</span> expression</div></pre></td></tr></table></figure></p>
<p>你可以抛出任意表达式而不是特定一种类型的表达式。下面的代码抛出了几个不同类型的表达式：</p>
<ul>
<li>throw “Error”; //string type</li>
<li>throw 42;</li>
<li>throw true;</li>
<li>throw {toString:function(){return “I’m an object!”}};</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//create an object type UserException</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">UserException</span> (<span class="params">message</span>)</span>&#123;</div><div class="line">    <span class="keyword">this</span>.message = message;</div><div class="line">    <span class="keyword">this</span>.name = <span class="string">"UserException"</span>;</div><div class="line">&#125;</div><div class="line"><span class="comment">//Make the exception convert to a pretty string when used as a string (e.g. by the error console)</span></div><div class="line">UserException.prototype.toString = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.name + <span class="string">': "'</span> + <span class="keyword">this</span>.message+ <span class="string">'"'</span>;</div><div class="line">&#125;</div><div class="line"><span class="comment">//create an instance of the object type and throw it</span></div><div class="line"><span class="keyword">throw</span> <span class="keyword">new</span> UserException(<span class="string">"Value too high"</span>);</div></pre></td></tr></table></figure>
<h3 id="try…catch语句"><a href="#try…catch语句" class="headerlink" title="try…catch语句"></a>try…catch语句</h3><p>try…catch语句标记一块待尝试的语句，并规定一个以上的响应应该有一个异常抛出。如果我们抛出一个异常，try…catch语句就捕获它。</p>
<p>try…catch语句有一个包含一条或者多条语句的try代码块，0个或多个的catch代码块，catch代码块中的语句会在try代码块中抛出异常时执行。 换句话说，如果你在try代码块中的代码如果没有执行成功，那么你希望将执行流程转入catch代码块。如果try代码块中的语句（或者try 代码块中调用的方法）一旦抛出了异常，那么执行流程会立即进入catch 代码块。如果try代码块没有抛出异常，catch代码块就会被跳过。finally 代码块总会紧跟在try和catch代码块之后执行，但会在try和catch代码块之后的其他代码之前执行。</p>
<p>下面的例子使用了try…catch语句。示例调用了一个函数用于从一个数组中根据传递值来获取一个月份名称。如果该值与月份数值不相符，会抛出一个带有”InvalidMonthNo”值的异常，然后在捕捉块语句中设monthName变量为unknown。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getMonthName</span>(<span class="params">mo</span>) </span>&#123;</div><div class="line">  mo = mo - <span class="number">1</span>; <span class="comment">// Adjust month number for array index (1 = Jan, 12 = Dec)</span></div><div class="line">  <span class="keyword">var</span> months = [<span class="string">"Jan"</span>,<span class="string">"Feb"</span>,<span class="string">"Mar"</span>,<span class="string">"Apr"</span>,<span class="string">"May"</span>,<span class="string">"Jun"</span>,<span class="string">"Jul"</span>,<span class="string">"Aug"</span>,<span class="string">"Sep"</span>,<span class="string">"Oct"</span>,<span class="string">"Nov"</span>,<span class="string">"Dec"</span>];</div><div class="line">  <span class="keyword">if</span> (months[mo]) &#123;</div><div class="line">    <span class="keyword">return</span> months[mo];</div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="keyword">throw</span> <span class="string">"InvalidMonthNo"</span>; <span class="comment">//throw keyword is used here</span></div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">try</span> &#123; <span class="comment">// statements to try</span></div><div class="line">  monthName = getMonthName(myMonth); <span class="comment">// function could throw exception</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">catch</span> (e) &#123;</div><div class="line">  monthName = <span class="string">"unknown"</span>;</div><div class="line">  logMyErrors(e); <span class="comment">// pass exception object to error handler -&gt; your own function</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="捕捉块-The-catch-block"><a href="#捕捉块-The-catch-block" class="headerlink" title="捕捉块(The catch block)"></a>捕捉块(The catch block)</h3><p>你可以使用捕捉块来处理所有可能在try代码块中产生的异常。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">    <span class="keyword">catch</span>(catchID)&#123;</div><div class="line">        statements</div><div class="line">    &#125;</div><div class="line"></div><div class="line">捕捉块指定了一个标识符 (上述语句中的catchID）来存放抛出语句指定的值；你可以用这个标识符来获取抛出的异常信息。在插入捕捉块时JavaScript创建这个标识符；标识符只存在于捕捉块的存续期间里；当捕捉块执行完成时，标识符不再可用。</div><div class="line"></div><div class="line">举个例子，下面代码抛出了一个异常。当异常出现时跳到捕捉块（the <span class="keyword">catch</span> block）。</div><div class="line"></div><div class="line"><span class="string">``</span><span class="string">`javascript</span></div><div class="line">   try &#123;</div><div class="line">      throw "myException" // generates an exception</div><div class="line">   &#125;</div><div class="line">   catch (e) &#123;</div><div class="line">   // statements to handle any exceptions</div><div class="line">      logMyErrors(e) // pass exception object to error handler</div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<h3 id="终结块-The-finally-Block"><a href="#终结块-The-finally-Block" class="headerlink" title="终结块(The finally Block)"></a>终结块(The finally Block)</h3><p>终结块包含了在try和catch块完成后、下面接着的try…catch语句之前执行的语句。终结块无论是否抛出异常都会执行。如果抛出了一个异常，就算没有异常处理，终结块里的语句也会执行。</p>
<p>你可以用终结块来令你的脚本在异常发生时优雅地退出；举个例子，你可能需要在绑定的脚本中释放资源。接下来的例子用文件处理语句打开了一个文件（服务端的JavaScript允许你进入文件）。如果在文件打开时一个异常抛出，终结块会在脚本错误之前关闭文件。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">openMyFile();</div><div class="line"><span class="keyword">try</span> &#123;</div><div class="line">    writeMyFile(theData); <span class="comment">//This may throw a error</span></div><div class="line">&#125;<span class="keyword">catch</span>(e)&#123;</div><div class="line">    handleError(e); <span class="comment">// If we got a error we handle it</span></div><div class="line">&#125;<span class="keyword">finally</span> &#123;</div><div class="line">    closeMyFile(); <span class="comment">// always close the resource</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>如果终结块返回一个值，该值会是整个try-catch-finally流程的返回值，不管在try和catch块中语句返回了什么：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">try</span> &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="number">0</span>);</div><div class="line">    <span class="keyword">throw</span> <span class="string">"bogus"</span>;</div><div class="line">  &#125; <span class="keyword">catch</span>(e) &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="number">1</span>);</div><div class="line">    <span class="keyword">return</span> <span class="literal">true</span>; <span class="comment">// this return statement is suspended</span></div><div class="line">                 <span class="comment">// until finally block has completed</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="number">2</span>); <span class="comment">// not reachable</span></div><div class="line">  &#125; <span class="keyword">finally</span> &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="number">3</span>);</div><div class="line">    <span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">// overwrites the previous "return"</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="number">4</span>); <span class="comment">// not reachable</span></div><div class="line">  &#125;</div><div class="line">  <span class="comment">// "return false" is executed now  </span></div><div class="line">  <span class="built_in">console</span>.log(<span class="number">5</span>); <span class="comment">// not reachable</span></div><div class="line">&#125;</div><div class="line">f(); <span class="comment">// console 0, 1, 3; returns false</span></div></pre></td></tr></table></figure>
<p>嵌套try…catch语句</p>
<p>你可以嵌套一个或多个try…catch语句。如果一个内部的try…catch语句没有捕捉块（catch block），将会启动匹配外部的try…catch语句的捕捉块（catch block）。</p>
<h2 id="错误匹配对象-Utilizing-Error-objects"><a href="#错误匹配对象-Utilizing-Error-objects" class="headerlink" title="错误匹配对象(Utilizing Error objects)"></a>错误匹配对象(Utilizing Error objects)</h2><p>根据错误类型，你也许可以用’name’和’message’获取更精炼的信息。’name’提供了常规的错误类(e.g., ‘DOMException’ or ‘Error’)，而’message’通常提供了一条从错误对象转换成字符串的简明信息。</p>
<p>在抛出你个人所为的异常时，为了充分利用那些属性（比如你的catch块不能分辨是你个人所为的异常还是系统的异常时），你可以使用错误构造函数（the Error constructor）。比如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">doSomethingErrorProne</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (ourCodeMakesAMistake()) &#123;</div><div class="line">    <span class="keyword">throw</span> (<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'The message'</span>));</div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    doSomethingToGetAJavascriptError();</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">....</div><div class="line">try &#123;</div><div class="line">  doSomethingErrorProne();</div><div class="line">&#125;</div><div class="line"><span class="keyword">catch</span> (e) &#123;</div><div class="line">  <span class="built_in">console</span>.log(e.name); <span class="comment">// logs 'Error'</span></div><div class="line">  <span class="built_in">console</span>.log(e.message); <span class="comment">// logs 'The message' or a JavaScript error message)</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
    
  </div>


          </div>
          

  <p>热评文章</p>
  <div class="ds-top-threads" data-range="weekly" data-num-items="4"></div>


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2016/05/17/流程控制与错误处理/"
           data-title="流程控制与错误处理" data-url="http://gaoquan.wang/2016/05/17/流程控制与错误处理/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.jpg"
               alt="GaoQ" />
          <p class="site-author-name" itemprop="name">GaoQ</p>
          <p class="site-description motion-element" itemprop="description">There are no shortcuts to any place worth going</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">39</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">5</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">28</span>
                <span class="site-state-item-name">标签</span>
              
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        <div class="links-of-blogroll motion-element">
          
        </div>

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">GaoQ</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>



      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  


  




<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=0.5.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=0.5.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=0.5.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"gaoquan"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
  





  
  
  
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
  </script>

  <script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for (i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
      }
    });
  </script>

  
    <script type="text/javascript" src="http://cdn.staticfile.org/mathjax/2.4.0/MathJax.js"></script>
    <script type="text/javascript" src="http://cdn.staticfile.org/mathjax/2.4.0/config/TeX-AMS-MML_HTMLorMML.js"></script>
  


  


</body>
</html>
